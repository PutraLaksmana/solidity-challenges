// SPDX-License-Identifier: MIT
pragma solidity 0.8.25;

contract CombinationLock {
    bytes32 private winningCombinationHash;

    constructor(bytes32 _winningCombinationHash) {
        winningCombinationHash = _winningCombinationHash;
    }

    function submitCombination(
        uint8[3] memory combination
    ) public view returns (bool, uint) {
        require(
            combination[0] != combination[1] &&
                combination[0] != combination[2] &&
                combination[1] != combination[2],
            "Combination must use distinct numbers"
        );

        uint8 intermediateSum1;
        uint8 intermediateSum2;
        uint8 finalSum;
        unchecked {
            intermediateSum1 = combination[0] + combination[1];
            intermediateSum2 = intermediateSum1 + combination[2];
            finalSum = intermediateSum2;
        }

        bool isWinningCombination = (finalSum == 0) &&
            (keccak256(abi.encodePacked(combination)) ==
                winningCombinationHash);
        bool success = isWinningCombination;

        if (success) {
            return (true, finalSum);
        }

        return (false, finalSum);
    }
}
